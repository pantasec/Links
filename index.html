<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pantasec | Creador Digital - Ciberseguridad</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Existing CSS remains unchanged */
        :root {
            --primary: #FF7A00;
            --primary-light: rgba(255, 122, 0, 0.3);
            --dark: #0a0a0a;
            --light: #f5f5f5;
            --grey: #1a1a1a;
            --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            --icon-color: #FF7A00;
            --purple: #8A2BE2;
            --purple-light: rgba(138, 43, 226, 0.3);
            --yellow: #FFC107;
            --yellow-light: rgba(255, 193, 7, 0.3);
        }

        /* Rest of the CSS remains unchanged */
        /* ... (omitted for brevity, copy the original CSS from your code) ... */
    </style>
</head>
<body>
    <video autoplay muted loop playsinline id="background-video">
        <source src="background-video.mp4" type="video/mp4">
        Your browser does not support HTML5 video.
    </video>

    <div class="container">
        <header>
            <h1>PANTASEC</h1>
            <p class="tagline">Creador Digital - Ciberseguridad</p>
        </header>

        <h3 class="section-title">Cursos Disponibles</h3>
        <div class="links">
            <div class="link-card">
                <div class="link-icon">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="link-text">
                    <p class="link-title">Introducción a Redes</p>
                    <p class="link-desc">Aprende los fundamentos de redes y comienza tu carrera en ciberseguridad</p>
                </div>
                <a href="https://www.elrincondelhacker.es/offers/8J49oCnw/checkout" class="course-button" aria-label="Comprar curso Introducción a Redes" target="_blank">Comprar Curso</a>
            </div>
        </div>

        <h3 class="section-title">LionxSecurity</h3>
        <div class="links">
            <div class="link-card" id="academyLink">
                <div class="link-icon">
                    <i class="fas fa-book"></i>
                </div>
                <div class="link-text">
                    <p class="link-title">LionxSecurity</p>
                    <p class="link-desc">Academia de Hacking Ético - 15% de descuento para los primeros 100</p>
                </div>
            </div>
            <div class="tools-box">
                <div class="tools-buttons">
                    <a href="#" class="tool-button" id="freeNotesButton">
                        <i class="fas fa-gift"></i> Apuntes Gratis
                    </a>
                    <a href="#" class="tool-button" id="hackingToolsButton">
                        <i class="fab fa-github"></i> Hacking Tools
                    </a>
                </div>
            </div>
        </div>

        <!-- Rest of the HTML sections (Contenido Principal, Redes Sociales) remain unchanged -->
        <!-- ... (omitted for brevity, copy the original HTML sections) ... -->
    </div>

    <div class="floating-book" id="bookIcon">
        <i class="fas fa-book"></i>
    </div>

    <!-- Modal de Descuento (Updated for Kit) -->
    <div class="modal-overlay" id="formModal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">×</span>
            <h3 class="modal-title">🎁 Acceso Exclusivo LionxSecurity</h3>
            <p style="text-align: center; margin-bottom: 1.5rem; color: var(--light); opacity: 0.9;">Regístrate y consigue un <strong style="color: var(--primary);">15% de descuento</strong> en nuestros cursos de hacking ético (solo para los primeros 100 registrados).</p>
            <div class="brevo-form-container" id="brevo-discount-form">
                <div class="brevo-form-wrapper">
                    <div class="brevo-form-body">
                        <div class="brevo-form-content">
                            <h4>¡Obtén tu descuento del 15%!</h4>
                            <p>Completa el formulario para acceder a la oferta exclusiva.</p>
                        </div>
                        <form class="brevo-form" action="[Replace with Kit form action URL, e.g., https://lionxsecurity.kit.com/api/forms/e8620539f0/submit]" method="post" data-kit-form-id="e8620539f0">
                            <div class="brevo-form-field">
                                <input type="text" name="NAME" placeholder="Nombre completo" required>
                            </div>
                            <div class="brevo-form-field">
                                <input type="email" name="EMAIL" placeholder="Correo electrónico" required>
                            </div>
                            <div class="brevo-form-field">
                                <select name="INTERES" required>
                                    <option value="" disabled selected>Selecciona tu área de interés</option>
                                    <option value="hacking-etico">Hacking Ético</option>
                                    <option value="redes">Redes</option>
                                    <option value="bash">Bash</option>
                                    <option value="bug-bounty">Bug Bounty</option>
                                    <option value="oscp-ejpt-ecppt">OSCP-eJPT-eCPPT</option>
                                    <option value="clases-particulares">Clases Particulares</option>
                                    <option value="conseguir-trabajo">Conseguir Trabajo</option>
                                </select>
                            </div>
                            <div class="brevo-form-checkbox">
                                <label>
                                    <input type="checkbox" name="optin" required>
                                    <span>Marca esta casilla para recibir información sobre nuestros cursos y el descuento del 15%.</span>
                                </label>
                            </div>
                            <div class="brevo-form-submit">
                                <button type="submit"><i class="fas fa-percentage"></i> QUIERO MI DESCUENTO</button>
                            </div>
                        </form>
                        <div class="brevo-form-success" style="display: none;">
                            <h4>¡Registro exitoso!</h4>
                            <p>Te hemos enviado el código de descuento a tu correo electrónico. ¡Bienvenido a LionxSecurity!</p>
                        </div>
                    </div>
                </div>
            </div>
            <p class="privacy">Al registrarte aceptas nuestra política de privacidad. Puedes darte de baja en cualquier momento.</p>
        </div>
    </div>

    <!-- Modal de Apuntes and Herramientas remain unchanged (unless you want to update these for Kit as well) -->
    <!-- ... (omitted for brevity, copy the original modals for Apuntes and Herramientas) ... -->

    <script async data-uid="e8620539f0" src="https://lionxsecurity.kit.com/e8620539f0/index.js"></script>
    <script>
        // Hide background video on mobile devices
        if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
            const video = document.getElementById('background-video');
            if (video) video.style.display = 'none';
        }

        // Get DOM elements
        const bookIcon = document.getElementById('bookIcon');
        const academyLink = document.getElementById('academyLink');
        const freeNotesButton = document.getElementById('freeNotesButton');
        const hackingToolsButton = document.getElementById('hackingToolsButton');
        const formModal = document.getElementById('formModal');
        const closeModal = document.getElementById('closeModal');
        const apuntesModal = document.getElementById('apuntesModal');
        const closeApuntesModal = document.getElementById('closeApuntesModal');
        const hackingToolsModal = document.getElementById('hackingToolsModal');
        const closeHackingToolsModal = document.getElementById('closeHackingToolsModal');

        // Reset form inputs and hide success message
        function resetForm(modalId, formId) {
            const modal = document.getElementById(modalId);
            const form = modal.querySelector(`#${formId} form`);
            const successBody = modal.querySelector(`#${formId} .brevo-form-success`);
            const formBody = modal.querySelector(`#${formId} .brevo-form-body`);
            if (form) form.reset();
            if (successBody) successBody.style.display = 'none';
            if (formBody) formBody.style.display = 'block';
        }

        // Open discount modal
        function openFormModal() {
            if (formModal && apuntesModal && hackingToolsModal) {
                formModal.style.display = 'flex';
                apuntesModal.style.display = 'none';
                hackingToolsModal.style.display = 'none';
                document.body.style.overflow = 'hidden';
                resetForm('formModal', 'brevo-discount-form');
            }
        }

        // Open apuntes modal
        function openApuntesModal() {
            if (apuntesModal && formModal && hackingToolsModal) {
                apuntesModal.style.display = 'flex';
                formModal.style.display = 'none';
                hackingToolsModal.style.display = 'none';
                document.body.style.overflow = 'hidden';
                resetForm('apuntesModal', 'brevo-notes-form');
            }
        }

        // Open hacking tools modal
        function openHackingToolsModal() {
            if (hackingToolsModal && formModal && apuntesModal) {
                hackingToolsModal.style.display = 'flex';
                formModal.style.display = 'none';
                apuntesModal.style.display = 'none';
                document.body.style.overflow = 'hidden';
                resetForm('hackingToolsModal', 'brevo-tools-form');
            }
        }

        // Close modals and reset forms
        function closeModalFunc() {
            if (formModal && apuntesModal && hackingToolsModal) {
                formModal.style.display = 'none';
                apuntesModal.style.display = 'none';
                hackingToolsModal.style.display = 'none';
                document.body.style.overflow = 'auto';
                resetForm('formModal', 'brevo-discount-form');
                resetForm('apuntesModal', 'brevo-notes-form');
                resetForm('hackingToolsModal', 'brevo-tools-form');
            }
        }

        // Handle form submission (Updated for Kit)
        function handleFormSubmission(event, formId) {
            event.preventDefault();
            const form = event.target;
            const nameInput = form.querySelector('input[name="NAME"]');
            const emailInput = form.querySelector('input[name="EMAIL"]');
            const interestSelect = form.querySelector('select[name="INTERES"]');
            const optinCheckbox = form.querySelector('input[name="optin"]');
            const successBody = form.closest('.brevo-form-wrapper').querySelector('.brevo-form-success');
            const formBody = form.closest('.brevo-form-wrapper').querySelector('.brevo-form-body');

            // Validation
            if (!nameInput.value || !emailInput.value || !interestSelect.value || !optinCheckbox.checked) {
                alert('Por favor, completa todos los campos obligatorios.');
                return;
            }

            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(emailInput.value)) {
                alert('Por favor, introduce una dirección de correo electrónico válida.');
                return;
            }

            // Kit form submission
            const formData = new FormData(form);
            const data = {
                name: nameInput.value,
                email: emailInput.value,
                interest: interestSelect.value,
                optin: optinCheckbox.checked
            };

            // Option 1: If Kit uses an API endpoint for form submission
            fetch(form.action || 'https://lionxsecurity.kit.com/api/forms/e8620539f0/submit', {
                method: 'POST',
                body: JSON.stringify(data),
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json',
                    // Add any Kit-specific headers if required (e.g., API key)
                    // 'Authorization': 'Bearer [Your-Kit-API-Key]'
                }
            })
            .then(response => {
                if (!response.ok) {
                    return response.text().then(text => {
                        throw new Error(`HTTP error! Status: ${response.status}, Response: ${text}`);
                    });
                }
                return response.json();
            })
            .then(data => {
                console.log('Success:', data);
                if (successBody && formBody) {
                    formBody.style.display = 'none';
                    successBody.style.display = 'block';
                    setTimeout(closeModalFunc, 5000);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert(`Error al enviar el formulario: ${error.message}. Verifica la configuración de tu formulario en Kit (URL de acción o ID del formulario).`);
            });

            // Option 2: If Kit's SDK handles form submission (uncomment if applicable)
            /*
            if (window.KitForm) {
                window.KitForm.submit({
                    formId: form.dataset.kitFormId || 'e8620539f0',
                    data: {
                        NAME: nameInput.value,
                        EMAIL: emailInput.value,
                        INTERES: interestSelect.value,
                        optin: optinCheckbox.checked
                    },
                    onSuccess: () => {
                        console.log('Form submitted successfully via Kit SDK');
                        if (successBody && formBody) {
                            formBody.style.display = 'none';
                            successBody.style.display = 'block';
                            setTimeout(closeModalFunc, 5000);
                        }
                    },
                    onError: (error) => {
                        console.error('Kit form submission error:', error);
                        alert('Error al enviar el formulario. Por favor, intenta de nuevo o verifica tu configuración en Kit.');
                    }
                });
            } else {
                console.error('Kit SDK not loaded');
                alert('Error: Kit SDK no está cargado. Verifica que el script de Kit esté correctamente incluido.');
            }
            */
        }

        // Attach event listeners
        if (bookIcon) bookIcon.addEventListener('click', openFormModal);
        if (academyLink) {
            academyLink.addEventListener('click', (e) => {
                e.preventDefault();
                openFormModal();
            });
        }
        if (freeNotesButton) {
            freeNotesButton.addEventListener('click', (e) => {
                e.preventDefault();
                openApuntesModal();
            });
        }
        if (hackingToolsButton) {
            hackingToolsButton.addEventListener('click', (e) => {
                e.preventDefault();
                openHackingToolsModal();
            });
        }
        if (closeModal) closeModal.addEventListener('click', closeModalFunc);
        if (closeApuntesModal) closeApuntesModal.addEventListener('click', closeModalFunc);
        if (closeHackingToolsModal) closeHackingToolsModal.addEventListener('click', closeModalFunc);
        if (formModal) {
            formModal.addEventListener('click', (e) => {
                if (e.target === formModal) closeModalFunc();
            });
        }
        if (apuntesModal) {
            apuntesModal.addEventListener('click', (e) => {
                if (e.target === apuntesModal) closeModalFunc();
            });
        }
        if (hackingToolsModal) {
            hackingToolsModal.addEventListener('click', (e) => {
                if (e.target === hackingToolsModal) closeModalFunc();
            });
        }

        // Attach form submission handlers
        const discountForm = document.querySelector('#brevo-discount-form form');
        const notesForm = document.querySelector('#brevo-notes-form form');
        const toolsForm = document.querySelector('#brevo-tools-form form');

        if (discountForm) {
            discountForm.addEventListener('submit', (e) => handleFormSubmission(e, 'brevo-discount-form'));
        }
        if (notesForm) {
            notesForm.addEventListener('submit', (e) => handleFormSubmission(e, 'brevo-notes-form'));
        }
        if (toolsForm) {
            toolsForm.addEventListener('submit', (e) => handleFormSubmission(e, 'brevo-tools-form'));
        }
    </script>
</body>
</html>
